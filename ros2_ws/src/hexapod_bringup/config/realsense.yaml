# Intel RealSense D435i Configuration
# Mounted on hexapod pan/tilt head

/**:
  ros__parameters:
    # Camera identification (auto-detect if only one connected)
    serial_no: ""
    usb_port_id: ""

    # Device type filter
    device_type: "d435i"

    # Frame rates (lower = less CPU, more stable on Pi)
    depth_module.profile: "640x480x15"
    rgb_camera.profile: "640x480x15"

    # Enable streams
    enable_depth: true
    enable_color: true
    enable_infra1: false
    enable_infra2: false
    enable_gyro: true
    enable_accel: true

    # Depth settings
    depth_module.exposure: 8500
    depth_module.gain: 16
    depth_module.enable_auto_exposure: true

    # Color settings
    rgb_camera.enable_auto_exposure: true

    # IMU settings
    unite_imu_method: 2  # Linear interpolation
    gyro_fps: 200
    accel_fps: 63

    # Frame alignment
    align_depth.enable: true

    # Pointcloud (enable for rtabmap)
    pointcloud.enable: true
    pointcloud.stream_filter: 0  # RS2_STREAM_ANY
    pointcloud.stream_index_filter: -1

    # TF frames
    base_frame_id: "camera_link"
    depth_frame_id: "camera_depth_frame"
    depth_optical_frame_id: "camera_depth_optical_frame"
    color_frame_id: "camera_color_frame"
    color_optical_frame_id: "camera_color_optical_frame"
    gyro_frame_id: "camera_gyro_frame"
    accel_frame_id: "camera_accel_frame"
    imu_optical_frame_id: "camera_imu_optical_frame"

    # Publishing
    publish_tf: true
    tf_publish_rate: 0.0  # Static only
    publish_odom_tf: false

    # Diagnostics
    diagnostics_period: 1.0
