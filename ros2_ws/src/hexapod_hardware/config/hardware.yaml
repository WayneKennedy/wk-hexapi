# Hexapod Hardware Configuration
# Based on Freenove Big Hexapod Robot Kit (FNK0052)

hexapod_hardware:
  ros__parameters:
    # I2C Configuration
    i2c:
      bus: 1
      pca9685_addr_1: 0x40  # First servo driver
      pca9685_addr_2: 0x41  # Second servo driver
      mpu6050_addr: 0x68    # IMU
      ads7830_addr: 0x48    # ADC for battery

    # Servo Configuration
    servos:
      pwm_frequency: 50     # Hz
      min_pulse_us: 500
      max_pulse_us: 2500
      power_gpio: 4         # GPIO pin for servo power enable (low=enabled)
      # Leg mapping: [coxa, femur, tibia] servo channels per leg
      # From fn-hexapod control.py - note legs 3,4 have non-contiguous tibia channels
      # Channel routing: 0-15 -> PCA9685 @ 0x41, 16-31 -> PCA9685 @ 0x40
      leg_channels:
        - [15, 14, 13]  # Leg 1 (RF)
        - [12, 11, 10]  # Leg 2 (RM)
        - [9, 8, 31]    # Leg 3 (RR) - tibia on ch 31!
        - [22, 23, 27]  # Leg 4 (LR) - tibia on ch 27!
        - [19, 20, 21]  # Leg 5 (LM)
        - [16, 17, 18]  # Leg 6 (LF)
      # Head/camera servo channels (from fn-hexapod server.py CMD_CAMERA handler)
      head_channels:
        pan: 0    # Channel 0 on PCA9685 @ 0x41
        tilt: 1   # Channel 1 on PCA9685 @ 0x41
      # Link lengths in mm (for IK)
      link_lengths:
        coxa: 33
        femur: 90
        tibia: 110

    # IMU Configuration
    imu:
      publish_rate: 100.0   # Hz
      accel_range: 2        # +/- 2g
      gyro_range: 250       # +/- 250 deg/s

    # Battery Configuration
    battery:
      publish_rate: 1.0     # Hz
      voltage_divider: 3.0  # Scaling factor
      low_voltage_warn: 6.5 # V per cell
      channels: [0, 4]      # ADC channels for dual batteries

    # LED Configuration
    leds:
      count: 7
      brightness: 255
      type: 'GRB'           # Color order for WS2812

    # Range Finder Configuration (HC-SR04 ultrasonic)
    range_finder:
      publish_rate: 10.0    # Hz
      trigger_pin: 27       # GPIO pin
      echo_pin: 22          # GPIO pin
      max_range: 3.0        # meters
      min_range: 0.02       # meters (2cm)
      field_of_view: 0.2617 # radians (~15 degrees)

    # PCB/Hardware Version
    pcb_version: 2          # V2.0 connector (SPI for LEDs)
    pi_version: 2           # Raspberry Pi 5
